<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><link href=http://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>UsingRedashForVisualization &#183; Dash</title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-a.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/custom-additions.css?ref=abc124"><link rel=stylesheet href=https://purplepalmdash.github.io/css/highlight/googlecode.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/docco.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=/js/html2canvas.js></script><script type=text/javascript>function genPostShot(){var rightNow=new Date();var imageName=rightNow.toISOString().slice(0,16).replace(/(-)|(:)|(T)/g,"");imageName+='.jpg'
html2canvas(document.getElementsByClassName('post'),{background:'#FFFFFF',onrendered:function(canvas){$('#test').attr('href',canvas.toDataURL("image/jpeg"));$('#test').attr('download',imageName);$('#test')[0].click();}});};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124"><link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel=icon><meta name=description content="UsingRedashForVisualization"><meta name=keywords content="Technology"></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><img src=http://purplepalmdash.github.io/images/mylogo.jpeg alt=gravatar><h1><a href=http://purplepalmdash.github.io/>很惭愧，就做了一点微小的工作</a></h1><a href=http://purplepalmdash.github.io/><p>Dash</p></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/post/>All Posts</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/technology/>Technology</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/life/>Life</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/linuxtips/>LinuxTips</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/purplepalmdash><i class="fa fa-github-square fa-3x"></i></a><a href=https://cn.linkedin.com/in/yang-feipeng-1b909319><i class="fa fa-linkedin-square fa-3x"></i></a><a href=https://plus.google.com/u/0/106572959364703833986><i class="fa fa-google-plus-square fa-3x"></i></a><a href=https://www.facebook.com/yang.feipeng><i class="fa fa-facebook-square fa-3x"></i></a><a href=https://twitter.com/dashwillfly><i class="fa fa-twitter-square fa-3x"></i></a></li></ul></div></div><div class="content container"><div class=post><h1>UsingRedashForVisualization</h1><p align=right><a href=javascript:genPostShot()>TurnToJPG --> <i class="fa fa-camera-retro fa-2x"></i></a><a id=test></a></p><hr><span class=post-date>Mar 13, 2020<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><div id=_toc class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#aim>AIM</a></li><li><a href=#environment>Environment</a></li><li><a href=#redash-bootstrap>Redash bootstrap</a></li><li><a href=#configure-data-source>Configure data source</a></li><li><a href=#get-sqlite-db>Get Sqlite db</a></li><li><a href=#create-query>Create Query</a></li><li><a href=#dashboard>Dashboard</a></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></div><h3 id=aim>AIM</h3><p>Using redash for representing Wuhan&rsquo;s nCov dataset.</p><h3 id=environment>Environment</h3><p>Hardware/Software/OS is listed as following:</p><pre><code>kvm vm with 2cores and 3072MB memory plus 200G disk.
Using docker/docker-compose for redash website.
OS is ubuntu 18.04.3
IP: 192.168.137.100
</code></pre><h3 id=redash-bootstrap>Redash bootstrap</h3><p>Using the repository which located at:<br><a href=https://github.com/getredash/setup>https://github.com/getredash/setup</a></p><p>You have to git clone this repository and run setup.sh under the directory. After setup the docker-compose file located in <code>/opt/redash</code>, if you want to quickly setup another docker/docker-compose based environment, simply copy the folder and the related docker images to remote machine&rsquo;s <code>/opt/redash</code>, up and running again.</p><pre><code>root@node:/opt/redash# ls
docker-compose.yml  env  postgres-data
root@node:/opt/redash# docker-compose run --rm server create_db
root@node:/opt/redash# docker-compose up -d
Creating network &quot;redash_default&quot; with the default driver
Creating redash_redis_1    ... done
Creating redash_postgres_1 ... done
Creating redash_scheduled_worker_1 ... done
Creating redash_adhoc_worker_1     ... done
Creating redash_scheduler_1        ... done
Creating redash_server_1           ... done
Creating redash_nginx_1            ... done
</code></pre><p>The redash environment rested in 7 docker instance, could be examined using <code>docker ps</code>:</p><pre><code>root@node:/opt/redash# docker ps
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                         NAMES
1e701e0bb8d2        redash/nginx:latest          &quot;nginx -g 'daemon of…&quot;   6 minutes ago       Up 6 minutes        0.0.0.0:80-&gt;80/tcp, 443/tcp   redash_nginx_1
5c00c609baa6        redash/redash:8.0.0.b32245   &quot;/app/bin/docker-ent…&quot;   7 minutes ago       Up 6 minutes        0.0.0.0:5000-&gt;5000/tcp        redash_server_1
8dcd4c2db0f8        redash/redash:8.0.0.b32245   &quot;/app/bin/docker-ent…&quot;   7 minutes ago       Up 6 minutes        5000/tcp                      redash_scheduled_worker_1
5d1dbd77f4ce        redash/redash:8.0.0.b32245   &quot;/app/bin/docker-ent…&quot;   7 minutes ago       Up 6 minutes        5000/tcp                      redash_adhoc_worker_1
6d56d7cd9040        redash/redash:8.0.0.b32245   &quot;/app/bin/docker-ent…&quot;   7 minutes ago       Up 6 minutes        5000/tcp                      redash_scheduler_1
c8efb3ff7437        postgres:9.6-alpine          &quot;docker-entrypoint.s…&quot;   7 minutes ago       Up 7 minutes        5432/tcp                      redash_postgres_1
a78dd1b1727f        redis:5.0-alpine             &quot;docker-entrypoint.s…&quot;   7 minutes ago       Up 7 minutes        6379/tcp                      redash_redis_1
</code></pre><p>Now visit the vm&rsquo;s 80 port you will see:</p><p><img src=/images/2020_03_13_22_52_24_544x553.jpg alt=/images/2020_03_13_22_52_24_544x553.jpg></p><p>After login you will get the following page:</p><p><img src=/images/2020_03_13_22_55_16_827x528.jpg alt=/images/2020_03_13_22_55_16_827x528.jpg></p><p>Until now your redash environment has been bootstraped.</p><h3 id=configure-data-source>Configure data source</h3><p>Click your username and select <code>Data Sources</code>:</p><p><img src=/images/2020_03_13_22_55_46_255x410.jpg alt=/images/2020_03_13_22_55_46_255x410.jpg></p><p>Click <code>New Data Source</code> button for adding a new data source:</p><p><img src=/images/2020_03_13_22_58_02_812x505.jpg alt=/images/2020_03_13_22_58_02_812x505.jpg></p><p>Select sqlite and you will be leading to following window:</p><p><img src=/images/2020_03_13_23_00_27_509x445.jpg alt=/images/2020_03_13_23_00_27_509x445.jpg></p><p>Fill in some infos for finishing:</p><p><img src=/images/2020_03_13_23_00_53_405x372.jpg alt=/images/2020_03_13_23_00_53_405x372.jpg></p><h3 id=get-sqlite-db>Get Sqlite db</h3><p>We take following page for refrence:</p><p><a href=https://discuss.redash.io/t/example-data-source-for-the-choropleth-maps/3696>https://discuss.redash.io/t/example-data-source-for-the-choropleth-maps/3696</a></p><p>First fetch the example sqlite db using following command:</p><p><img src=/images/2020_03_13_23_03_22_565x368.jpg alt=/images/2020_03_13_23_03_22_565x368.jpg></p><pre><code># wget https://dbhub.io/x/download/justinclift/DB4S%20daily%20users%20by%20country.sqlite?commit=28a554c2795170d5739b7a41df9baa2ad13b985b325d238bd869a14d1148f9ea
# mv DB4S\ daily\ users\ by\ country.sqlite first.db
</code></pre><p>Copy this db into following docker instance:</p><pre><code># docker cp first.db redash_scheduled_worker_1:/app
# docker cp first.db redash_server_1:/app
# docker cp first.db redash_adhoc_worker_1:/app
# docker cp first.db redash_scheduler_1:/app
</code></pre><p>Now click <code>Test Connection</code> you will get <code>Succeed</code>.</p><h3 id=create-query>Create Query</h3><p>Click <code>Create Query</code>, you will be leading to following window:</p><p><img src=/images/2020_03_13_23_10_34_613x380.jpg alt=/images/2020_03_13_23_10_34_613x380.jpg></p><p>Create a new query:</p><pre><code>SELECT country, users
FROM query_6
WHERE date = '2019-04-22'
</code></pre><p><img src=/images/2020_03_13_23_13_35_681x275.jpg alt=/images/2020_03_13_23_13_35_681x275.jpg></p><p>Click <code>Execute</code> you will get the table listed as:</p><p><img src=/images/2020_03_13_23_13_59_1157x317.jpg alt=/images/2020_03_13_23_13_59_1157x317.jpg></p><p>Click <code>New Visualization</code> for editing the visualization:</p><p><img src=/images/2020_03_13_23_14_47_955x617.jpg alt=/images/2020_03_13_23_14_47_955x617.jpg></p><p>Edit like following:</p><p><img src=/images/2020_03_13_23_17_03_634x623.jpg alt=/images/2020_03_13_23_17_03_634x623.jpg></p><p>The map will be rendered like:</p><p><img src=/images/2020_03_13_23_17_39_922x579.jpg alt=/images/2020_03_13_23_17_39_922x579.jpg></p><p>Click <code>save</code> for saving the map, then rename this query:</p><p><img src=/images/2020_03_13_23_18_36_559x261.jpg alt=/images/2020_03_13_23_18_36_559x261.jpg></p><h3 id=dashboard>Dashboard</h3><p>Create the first dashboard:</p><p><img src=/images/2020_03_13_23_19_59_566x223.jpg alt=/images/2020_03_13_23_19_59_566x223.jpg></p><p>An empty dashboard:</p><p><img src=/images/2020_03_13_23_20_20_753x511.jpg alt=/images/2020_03_13_23_20_20_753x511.jpg></p><p>Click <code>Add Widget</code>, select our newly created map:</p><p><img src=/images/2020_03_13_23_20_39_676x251.jpg alt=/images/2020_03_13_23_20_39_676x251.jpg></p><p>Select the map:</p><p><img src=/images/2020_03_13_23_21_16_691x280.jpg alt=/images/2020_03_13_23_21_16_691x280.jpg></p><p>Effect:</p><p><img src=/images/2020_03_13_23_21_33_921x659.jpg alt=/images/2020_03_13_23_21_33_921x659.jpg></p><h3 id=conclusion>Conclusion</h3><p>Now we have created the first visualization in redash easily displayed a
sqlite database, in next chapter we will take a look at how to display the
nCov statistics.</p></div></div><script src=http://purplepalmdash.github.io/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>