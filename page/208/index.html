<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta name=generator content="Hugo 0.64.0"><link href=http://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Dash &#183; Dash</title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/hyde-a.css?ref=abc124"><link rel=stylesheet href="https://purplepalmdash.github.io/css/custom-additions.css?ref=abc124"><link rel=stylesheet href=https://purplepalmdash.github.io/css/highlight/googlecode.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/docco.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=/js/html2canvas.js></script><script type=text/javascript>function genPostShot(){var rightNow=new Date();var imageName=rightNow.toISOString().slice(0,16).replace(/(-)|(:)|(T)/g,"");imageName+='.jpg'
html2canvas(document.getElementsByClassName('post'),{background:'#FFFFFF',onrendered:function(canvas){$('#test').attr('href',canvas.toDataURL("image/jpeg"));$('#test').attr('download',imageName);$('#test')[0].click();}});};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon-precomposed sizes=144x144 href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124"><link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel=icon><link href=%7balternate%20%7bRSS%20application/rss+xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20http://purplepalmdash.github.io/index.xml%7d rel=alternate type=application/rss+xml title="Dash &#183; Dash"><meta name=description content><meta name=keywords content="unix,virtualization,embedded,linux"></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><img src=http://purplepalmdash.github.io/images/mylogo.jpeg alt=gravatar><h1><a href=http://purplepalmdash.github.io/>很惭愧，就做了一点微小的工作</a></h1><a href=http://purplepalmdash.github.io/><p>Dash</p></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/post/>All Posts</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/technology/>Technology</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/life/>Life</a></li><li class=sidebar-nav-item><a href=http://purplepalmdash.github.io/categories/linuxtips/>LinuxTips</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/purplepalmdash><i class="fa fa-github-square fa-3x"></i></a><a href=https://cn.linkedin.com/in/yang-feipeng-1b909319><i class="fa fa-linkedin-square fa-3x"></i></a><a href=https://plus.google.com/u/0/106572959364703833986><i class="fa fa-google-plus-square fa-3x"></i></a><a href=https://www.facebook.com/yang.feipeng><i class="fa fa-facebook-square fa-3x"></i></a><a href=https://twitter.com/dashwillfly><i class="fa fa-twitter-square fa-3x"></i></a></li></ul></div></div><div class="content container"><div class=posts><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/03/14/trouble-shotting-on-wordpress/>Trouble-Shotting on Wordpress</a></h1><span class=post-date>Mar 14, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Since the Wordpress is located at home, there are several problems for dealing with.
###Changeing Apache Listening Port
Nanjing Unicom has banned the port 80, thus I have to change the default listening port of apache from 80 to other ports. Following is How-To:
First import an variable in /etc/apache2/envvars:</p><pre><code>	export VHOST_PORT_HTTP=7777

</code></pre><p>Then Change the /etc/apache2/ports.conf:</p><pre><code>	# NameVirtualHost *:80
	# Listen 80
	NameVirtualHost *:${VHOST_PORT_HTTP}
	Listen ${VHOST_PORT_HTTP}

</code></pre><p>Finally change the site-enabled:</p><pre><code>	root@arm:/etc/apache2# cat sites-enabled/000-default
	&lt;VirtualHost *:${VHOST_PORT_HTTP}&gt;

</code></pre><p>Now restart the apache2 service, you should see the apache listens the 7777 port.</p><pre><code>	/etc/init.d/apache2 restart

</code></pre><p>###Configurating the WordPress
Install this light-weight browser for changing configurations.</p><pre><code>	pacman -S midori

</code></pre><p>After remote login with &ldquo;ssh -Y&rdquo;, simply input:</p><pre><code>	midori 

</code></pre><p>Then you can get a local window.
But wait, midori relies on window, but we&rsquo;d better do everything in command-line for savign the bandwidth, thus we install the elinks, and use it for configurating the wordpress.</p><pre><code>	$ apt-get install elinks

</code></pre><p>You have to change the configuration->General, from <a href=http://xxx.xxx.xxx.xxx>http://xxx.xxx.xxx.xxx</a> to <a href=http://xxx.xxx.xxx.xxx>http://xxx.xxx.xxx.xxx</a>:7777, then we can change the port and let it show in browser.</p><p>Now you can access the wordpress in everywhere.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/03/13/customize-wordpress-on-beaglebone-black/>Customize Wordpress on BeagleBone Black</a></h1><span class=post-date>Mar 13, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>For Using proxy for Wordpress, we can directly edit the wp-config file:</p><pre><code>	$ cat wp-config.php
	/** Set following for working behind the proxy **/
	//define('WP_PROXY_HOST', '10.0.0.221');
	//define('WP_PROXY_PORT', '9001');
	#define('WP_PROXY_BYPASS_HOSTS','*.local-intranet');
	##
	define('WP_EMMORY_LIMIT', '64M');

</code></pre><p>A trouble shooting, you have to edit the /etc/resolv.conf to change the default dns server, then your wordpress could reach the network and install new plugins or themes.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/03/13/setting-up-wordpress-on-beaglebone-black/>Setting Up Wordpress on BeagleBone Black</a></h1><span class=post-date>Mar 13, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Since BeagleBone Black&rsquo;s hardware configuration is enough for running LAMP, I decide to run wordpress on it.
###Environment
Hardware Configuration:
CPU: Generic AM33XX (Flattened Device Tree)
MEM: MemTotal: 507428 kB
Disk: 1.8&rsquo;&rsquo; USB Disk, 30 GB
I also add 512MB swapfile for swapping partition.</p><p>Software Configuration:
Kernel: Linux arm 3.8.13-bone30 #1 SMP Mon Nov 18 14:53:22 CST 2013 armv7l GNU/Linux
OS: Debian GNU/Linux 7 \n \l
###LAMP Configuration
####Install Apache</p><pre><code>	$ apt-get install apache2

</code></pre><p>After installation, simply open the browser and visit the http://YourIPAddress, if you can find &ldquo;It works!", then this says the apache server is running now.</p><p>####Install MySQL
MySQL is a powerful database management system which is used for organizing and retrieving data.</p><pre><code>	$ apt-get install mysql-server libapache2-mod-auth-mysql php5-mysql

</code></pre><p>You should be asked to provide the MySQL &ldquo;root&rdquo; user password.
Activate MySQL via following command:</p><pre><code>	$ mysql_install_db
	Change the root password? [Y/n] n 
	Remove anonymous users? [Y/n] Y
	Disallow root login remotely? [Y/n] Y
	Remove test database and access to it? [Y/n] Y
	Reload privilege tables now? [Y/n] Y

</code></pre><p>Now the MySQL is OK, you have to install PHP</p><p>####Install PHP
Install following packages:</p><pre><code>	$ apt-get install php5 libapache2-mod-php5 php5-mcrypt

</code></pre><p>Edit the directory index file:</p><pre><code>	# cat /etc/apache2/mods-enabled/dir.conf
	&lt;IfModule mod_dir.c&gt;
	          DirectoryIndex index.php index.html index.cgi index.pl index.php index.xhtml index.htm
	&lt;/IfModule&gt;
Install modules for using the searched result:&lt;br /&gt;
	apt-cache search php5-
Testing PHP on your own apache search:&lt;br /&gt;
	root@arm:/home# cat /var/www/info.php
	&lt;?php
	phpinfo();
	?&gt;

</code></pre><p>Restart apache server and view the result:</p><pre><code>	# /etc/init.d/apache2 restart

</code></pre><p>View the http://YourIpAddress/info.php you can see the php printed out messages.</p><p>###Wordpress Setup
Download the latest Wordpress via:</p><pre><code>	# wget http://wordpress.org/latest.tar.gz

</code></pre><p>Install the ntp server, or you may meet some time and date problem:</p><pre><code>	# apt-get install ntp

</code></pre><p>Ok, the time is really an issue, gonna be discussed later.
Simply set the time via " date -s &ldquo;$timestring&rdquo;&rdquo; is enough.</p><p>Now uncompress the wordpress.</p><p>Create the Wordpress Database and User:</p><pre><code>	# mysql -u root -p
	mysql&gt; CREATE DATABASE wordpress;
	Query OK, 1 row affected (0.01 sec)
	mysql&gt; CREATE USER wordpressuser@localhost;
	Query OK, 0 rows affected (0.00 sec)
	mysql&gt; SET PASSWORD FOR wordpressuser@localhost= PASSWORD(&quot;xxxxxxxx&quot;);
	Query OK, 0 rows affected (0.00 sec)
	mysql&gt; GRANT ALL PRIVILEGES ON wordpress.* TO wordpressuser@localhost IDENTIFIED BY 'password';
	Query OK, 0 rows affected (0.00 sec)
	mysql&gt; FLUSH PRIVILEGES;
	Query OK, 0 rows affected (0.00 sec)
	mysql&gt; exit
	Bye

</code></pre><p>Setup the WordPress Configuration:</p><pre><code>	cp ~/wordpress/wp-config-sample.php ~/wordpress/wp-config.php

</code></pre><p>Edit the configuration file:</p><pre><code>	cat ~/wordpress/wp-config.php
	// ** MySQL settings - You can get this info from your web host ** //
	/** The name of the database for WordPress */
	define('DB_NAME', 'wordpress');
	
	/** MySQL database username */
	define('DB_USER', 'wordpressuser');
	
	/** MySQL database password */
	define('DB_PASSWORD', 'password');

</code></pre><p>Install rsync:</p><pre><code>	# apt-get install rsync

</code></pre><p>Use rsync for sync to the website&rsquo;s root directory:</p><pre><code>	# rsync -avP ~/wordpress/ /var/www/

</code></pre><p>Change to the website&rsquo;s root directory and change the ownership to the apache user:</p><pre><code>	root@arm:/etc# cd /var/www/
	root@arm:/var/www# chown www-data:www-data /var/www -R 
	root@arm:/# chmod g+w /var/www -R 

</code></pre><p>To know the username of apache:</p><pre><code>	lsof -i 
	Notice the :http part.

</code></pre><p>Install php5-gd , which is the required php module to run wordpress.</p><pre><code>	apt-get install php5-gd

</code></pre><p>Now access the page of /wp-admin/install.php is OK. or you can access the http://YourIPAddress is ready for install the wordpress on your BeagleBone Black.</p></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/03/12/migrate-beaglebone-black/>Migrate BeagleBone Black</a></h1><span class=post-date>Mar 12, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Since I want to run wordpress at home, while my RaspberryPI got only 256M RAM, it will be hard to run such a heavy application, I use BeagleBone Black to run it, BeagleBone Black has 512M RAM, which will be enough for run wordpress and etc.</p><p>###Setting up NFS Server
First I have to setup a nfs server in my LAN, I set it on my RaspberryPI, since I got only 1 USB hub which serves RaspberryPI, a 500GB harddisk has been attached to the USB hub, which is quite enough for serving nfs servers.
My RaspberryPI runs archlinux, then I follow the ArchLinux&rsquo;s Wiki setting up the nfs server</p><pre><code>	pacman -S nfs-utils
	# cat /etc/exports
	/media/debianroot 10.0.0.1/24(rw,sync,no_subtree_check,no_root_squash) 10.0.0.11(rw,sync,no_subtree_check,no_root_squash)
	### Check the result
	root@alarmpi ~]# exportfs -arv
	exporting 10.0.0.11:/media/debianroot
	exporting 10.0.0.1/24:/media/debianroot
	exporting 10.0.0.11:/media/debianroot to kernel
	exportfs: 10.0.0.11:/media/debianroot: Function not implemented
	### Change the domainname to &quot;localhost&quot;
	vim /etc/idmapd.conf 
	### Testing the services
	systemctl start rpc-idmapd.service
	systemctl start rpc-mountd.service
	### Enable the Services at startup
	systemctl enable rpc-mountd.service
	systemctl enable rpc-idmapd.service

</code></pre><p>Want testing the nfs, simply use following command:</p><pre><code>	mount -t nfs 10.0.0.230:/media/debianroot /mnt1

</code></pre><p>If you can see the mnt1 directory has the same content as in nfs server, you can use nfs now.
###Change the BeagleBone Startup file
In SD card, change uEnv.txt</p><pre><code>	[root@DashArch mnt]# cat uEnv.txt
	kernel_file=zImage
	initrd_file=uInitrd
	serverip=10.0.0.230
	ipaddr=10.0.0.122
	rootpath=/media/debianroot
	console=ttyO0,115200n8

</code></pre><p>###Replace Pogoplug
To replace Pogoplug at home, I have to do the following issues:</p><ol><li>Use No-ip on BeagleBone, replacing the Pogoplug&rsquo;s No-ip.</li><li>Run Apache or nginx instead of Pogoplug&rsquo;s service.</li></ol><p>Use No ip:
Install no-ip on RaspberryPI:</p><pre><code>	pacman -S noip

</code></pre><p>Configure noip on RaspberryPI:</p><pre><code>	noip2 -C -Y
	[root@alarmpi ~]# systemctl start noip2
	[root@alarmpi ~]# systemctl enable noip2
	ln -s '/usr/lib/systemd/system/noip2.service' '/etc/systemd/system/multi-user.target.wants/noip2.service'
	[root@alarmpi ~]# ps -ef | grep noip
	nobody     411     1  0 00:40 ?        00:00:00 /usr/bin/noip2 -c /etc/no-ip2.conf

</code></pre><p>Now we need to replace Pogoplug&rsquo;s service to RaspberryPI:
First we change the direct port 22 from pogoplug to RasspberryPI on Router.</p><p><img src=/images/redirect.jpg alt=/images/redirect.jpg></p><p>Now your no-ip pointed machine changed from Pogoplug into RaspberryPI.
###Remote update
Simply replacing the ssh related via setting up the different id_rsa:</p><pre><code>	cat .ssh/id_rsa.pub | ssh root@xxx.xx.xx.com 'cat &gt;&gt; .ssh/authorized_keys

</code></pre></div><div class=post><h1 class=post-title><a href=http://purplepalmdash.github.io/2014/03/11/updating-apache-configuration/>Updating apache configuration</a></h1><span class=post-date>Mar 11, 2014<br><a class=a_cat href=http://purplepalmdash.github.io/categories/technology>Technology</a></span><p>Due to ArchLinux&rsquo;s &ldquo;pacman -Syu &ndash;noconfirm&rdquo;, My apache upgraded from 2.2 to 2.4, thus the configuration file won&rsquo;t work for the new version. When using &ldquo;systemctl restart httpd.service&rdquo;, it complains some module won&rsquo;t be loaded.</p><p>For solving this problem, first make sure you upgraded to the newest version, then go to directory of &ldquo;/etc/httpd/conf&rdquo;, backup your own httpd.conf, then move the httpd.conf.pacnew into httpd.conf, then restart the httpd.service.</p><p>The configuration of the httpd.conf should also be upgraded, notice the following lines in my own configuration file:</p><pre><code>	DocumentRoot &quot;/home/Trusty/code/octo/heroku/Tomcat/public&quot;
	#DocumentRoot &quot;/srv/http&quot;
	#&lt;Directory &quot;/srv/http&quot;&gt;
	&lt;Directory &quot;/home/Trusty/code/octo/heroku/Tomcat/public&quot;&gt;

</code></pre><p>Restart again, and now your apache should work properly again.</p></div><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/207/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/207/>207</a></li><li class="page-item active"><a class=page-link href=/page/208/>208</a></li><li class=page-item><a class=page-link href=/page/209/>209</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/243/>243</a></li><li class=page-item><a href=/page/209/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/243/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div><script src=http://purplepalmdash.github.io/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>